# Chopsticks environment (example)
# Copy to .env and fill in values. NEVER commit your real .env.

# Required (bot)
STORAGE_DRIVER=postgres
DISCORD_TOKEN=__REPLACE_ME__
CLIENT_ID=__REPLACE_ME__
BOT_OWNER_IDS=__YOUR_DISCORD_USER_ID_COMMA_SEPARATED__

# Required (agent token encryption at rest)
# Generate: openssl rand -hex 32
AGENT_TOKEN_KEY=__REPLACE_WITH_64_CHAR_HEX__

# Database + cache
POSTGRES_URL=postgresql://chopsticks:chopsticks@postgres:5432/chopsticks
DATABASE_URL=postgresql://chopsticks:chopsticks@postgres:5432/chopsticks
REDIS_URL=redis://redis:6379

# Lavalink
LAVALINK_HOST=lavalink
LAVALINK_PORT=2333
LAVALINK_PASSWORD=youshallnotpass

# Agent control plane
AGENT_CONTROL_HOST=0.0.0.0
AGENT_CONTROL_PORT=8787
AGENT_CONTROL_URL=ws://bot:8787

# Optional: SVG card rendering for embed outputs (default: true)
SVG_CARDS=true

# Optional: health/metrics
HEALTH_PORT=8080

# Optional but strongly recommended: control-plane auth between controller and agent runners.
# If set on the controller, agents must present the same value in their hello handshake.
AGENT_RUNNER_SECRET=__REPLACE_WITH_RANDOM_SECRET__

# Optional but recommended: Dev API (used by ops runbooks like /dev-api/status).
DEV_API_PORT=3003
DEV_API_USERNAME=__REPLACE_ME__
DEV_API_PASSWORD=__REPLACE_WITH_LONG_RANDOM_PASSWORD__

# Optional but recommended: Dashboard auth/session hardening (set in production).
# Generate: openssl rand -hex 32
DASHBOARD_SESSION_SECRET=__REPLACE_WITH_LONG_RANDOM_SECRET__
# Set true when behind HTTPS reverse proxy (and set DASHBOARD_TRUST_PROXY=1).
DASHBOARD_COOKIE_SECURE=true
DASHBOARD_TRUST_PROXY=1

# Optional: lock down bot metrics/debug endpoints on HEALTH_PORT.
# If HEALTH_METRICS_TOKEN is set, /metrics and /metrics-app require it.
# If HEALTH_DEBUG_ENABLED=true, /debug and /debug/dashboard are enabled; set HEALTH_DEBUG_TOKEN to require auth.
HEALTH_METRICS_TOKEN=
HEALTH_DEBUG_ENABLED=false
HEALTH_DEBUG_TOKEN=

# Optional: PostgreSQL connection pool tuning
PG_POOL_MAX=10
PG_POOL_MIN=2
PG_IDLE_TIMEOUT=30000
PG_CONNECT_TIMEOUT=5000
PG_STATEMENT_TIMEOUT=30000

# Optional: analytics flush interval (ms). How often command stats are flushed to DB.
ANALYTICS_FLUSH_MS=15000

# Optional: bot rotating presence. Set false to disable.
BOT_PRESENCE_ENABLED=true
BOT_PRESENCE_STATUS=online

# Optional: Last.fm API key for /music now enrichment (artist info, album art).
# Free key at https://www.last.fm/api/account/create
LASTFM_API_KEY=

# Optional: NASA APOD API key for /apod command.
# Free key at https://api.nasa.gov — without it falls back to DEMO_KEY (rate limited).
NASA_API_KEY=DEMO_KEY

# Optional: HuggingFace API key for /imagine (AI image generation).
# Free key at https://huggingface.co/settings/tokens — create a Read token.
# Without this, /imagine will prompt users to set it up.
HUGGINGFACE_API_KEY=

# Optional: GitHub personal access token for /github command (higher rate limits).
# Without this, the command uses the unauthenticated GitHub API (60 req/hr per IP).
GITHUB_TOKEN=

# Optional: Steam API key for !steam prefix command (resolves Steam profile names).
# Free key at https://steamcommunity.com/dev/apikey
STEAM_API_KEY=

# ── Scaling (200k DAU) ──────────────────────────────────────────────────────
# Shard count: "auto" lets discord.js calculate, or set a number (1 shard per 2500 guilds).
DISCORD_SHARDS=auto

# In-process LRU cache sizes and TTLs (milliseconds).
# Layer 1 cache — zero network hop for hot guilds.
LOCAL_CACHE_GUILD_MAX=2000
LOCAL_CACHE_GUILD_TTL=60000
LOCAL_CACHE_USER_MAX=5000
LOCAL_CACHE_USER_TTL=30000

# Load test config (npm run loadtest)
LOADTEST_DURATION=10
LOADTEST_CONNECTIONS=10
